<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Counter</title>
</head>

<body>
<div id="divID"></div>
 
<script>

var ws = new WebSocket('ws://localhost:8002/consumer/spectrum'); 

ws.onerror = function (error) { 
    console.log("Error");
} 
ws.onclose = function () {
    console.log("Error");
 } 

ws.onopen = function () { 
  ws.send("Connection established. Hello server!"); 
}

var div = document.getElementById('divID');

ws.onmessage = function(msg) { 
    console.log(msg.data);

    let data;


    if (msg.data instanceof ArrayBuffer) {
        data = processArrayBuffer(msg.data);
    } else {
        data = processText(msg.data);
    }
 
    div.innerHTML = data;
}

function processArrayBuffer(buffer) {
    var name = new Uint8Array(buffer, 0, 16);
    var id = new Uint16Array(buffer, 16, 1);
    var score = new Float32Array(buffer, 18, 32);
}
 
function processText(data) {
    return data
}
 

</script>

</body>
</html>
